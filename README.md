–í–æ—Ç –ø—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è —Ñ–∞–π–ª–∞ `README.md` –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ [https://github.com/savier89/circuitbreaker](https://github.com/savier89/circuitbreaker), –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–æ–≥–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Å—Ç–∏–ª–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏, —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

---

# Circuit Breaker

## üöß –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Circuit Breaker –Ω–∞ Python

`circuitbreaker` ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ Python, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è –ø–∞—Ç—Ç–µ—Ä–Ω [Circuit Breaker](https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/serverless/event-hub-stream-analytics-cosmos-db#circuit-breaker-pattern), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –∫–∞—Å–∫–∞–¥–Ω—ã–µ —Å–±–æ–∏ –∏ —É–ª—É—á—à–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º –≤ —Å–∏—Å—Ç–µ–º–µ.

## üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞ —Å–±–æ–µ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–æ–±—ã—Ç–∏–π
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å –ø–æ–º–æ—â—å—é `pip`:

```bash
pip install circuitbreaker
```

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from circuitbreaker import circuit

@circuit
def unreliable_function():
    # –ò–º–∏—Ç–∞—Ü–∏—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
    raise Exception("Service is down")

# –¢–µ–ø–µ—Ä—å –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Ü–µ–ø—å—é
try:
    for _ in range(6):
        unreliable_function()
except Exception as e:
    print("Circuit breaker –æ—Ç–∫—Ä—ã–ª —Ü–µ–ø—å:", e)
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```python
@circuit(failure_threshold=5, recovery_time=60)
def unstable_api_call():
    # –í–∞—à –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
    raise ConnectionError("API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")
```

- `failure_threshold`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–æ—Ç–∫—Ä—ã—Ç–æ"
- `recovery_time`: –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç–∞ –ø–æ–ø—ã—Ç–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

```python
def fallback():
    return "Fallback response"

@circuit(failure_threshold=3, recovery_time=30, fallback_function=fallback)
def get_data():
    raise TimeoutError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ")

print(get_data())  # –í–µ—Ä–Ω—ë—Ç "Fallback response" –ø—Ä–∏ —Å–±–æ–µ
```

## üß∞ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏ Python

- Python 3.7+
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–∞—Ç—Ç–µ—Ä–Ω Circuit Breaker –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API, –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–±–æ–∏. –û–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—ã–∑–æ–≤–∞ –Ω–µ–æ—Ç–≤–µ—á–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –ø–æ–∑–≤–æ–ª—è—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏.

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

–õ—é–±—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã –∏ –ø—É–ª-—Ä–µ–∫–≤–µ—Å—Ç—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [GitHub Issues](https://github.com/savier89/circuitbreaker/issues) –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ [MIT License](LICENSE).

---

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏ —Ç.–¥.), —è –º–æ–≥—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å README –ø–æ–¥ –Ω–∏—Ö.